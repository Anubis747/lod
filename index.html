<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Live or Dead</title>

  <!-- Content‚ÄëSecurity‚ÄëPolicy (mantemos provisoriamente) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline'
      https://pagead2.googlesyndication.com
      https://*.googlesyndication.com
      https://*.adtrafficquality.google;
    connect-src 'self'
      https://*.adtrafficquality.google
      https://pagead2.googlesyndication.com;
    style-src 'self' 'unsafe-inline'
      https://cdnjs.cloudflare.com;
    font-src 'self'
      https://cdnjs.cloudflare.com;
    frame-src 'self'
      https://pagead2.googlesyndication.com
      https://*.adtrafficquality.google;
    fenced-frame-src 'self'
      https://pagead2.googlesyndication.com
      https://*.adtrafficquality.google;
    img-src 'self' data:
      https://*.googlesyndication.com
      https://*.adtrafficquality.google;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
  ">

  <!-- AdSense bootstrap (pronto para uso futuro) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9273959048665563" crossorigin="anonymous"></script>

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    body {
      font-family: sans-serif;
      max-width: 400px;
      margin: 3rem auto;
      text-align: center;
    }
    label, select, input, button {
      display: block;
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      margin: 0.5rem 0;
      box-sizing: border-box;
    }
    .description {
      margin: 0.75rem 0 1.25rem;
      font-size: 0.95rem;
      color: #444;
      text-align: left;
    }
    .faq {
      text-align: left;
      margin-top: 2rem;
    }
    .faq h2 {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
    }
    .faq details {
      margin-bottom: 0.75rem;
    }
    .result-card {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 8px;
      color: white;
      display: none;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      animation: fadeIn 0.3s ease-in-out;
    }
    .up   { background: #28a745; }
    .down { background: #dc3545; }

    footer {
      margin-top: 2rem;
      font-size: 0.8rem;
      color: #666;
    }
    footer a {
      color: #666;
      text-decoration: underline;
      margin: 0 0.5rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <h1>Live or Dead</h1>
  <!-- Descri√ß√£o multil√≠ngue e FAQ -->
  <p id="desc" class="description"></p>
  <section id="faq" class="faq"></section>

  <!-- Language selector -->
  <label id="langLabel" for="langSelect">Choose another language:</label>
  <select id="langSelect">
    <option value="en">English</option>
    <option value="pt">Portugu√™s</option>
    <option value="es">Espa√±ol</option>
    <option value="fr">Fran√ßais</option>
  </select>

  <!-- Hint -->
  <p id="hint">Type a URL below to see if it is up or down.</p>

  <!-- Input & button -->
  <input id="siteUrl" placeholder="e.g. example.com" />
  <button id="checkBtn">Check</button>

  <!-- Result -->
  <div id="result" class="result-card">
    <i id="icon" class="fa-solid fa-spinner fa-spin"></i>
    <span id="msg">Checking‚Ä¶</span>
  </div>

  <!-- Footer with links -->
  <footer>
    <a href="about.html">About</a> |
    <a href="privacy.html">Privacy</a>
  </footer>

  <script>
    const data = {
      en: {
        langLabel  : 'Choose another language:',
        hint       : 'Type a URL below to see if it is up or down.',
        desc       : 'Live or Dead is a free online tool that instantly checks whether any website is accessible or offline in real time. Simply enter the domain or URL you want to test, click the \"Check\" button, and get an immediate result‚Äîcomplete with server response time. No signup required, no ads in the way, just fast status checks whenever you need them.',
        faq        : `<h2>FAQ</h2>
                     <details><summary>What URLs can I test?</summary><p>You can test domains like <code>example.com</code>, subdomains like <code>blog.example.com</code>, or full URLs with protocol (<code>https://example.com</code>).</p></details>
                     <details><summary>Is Live or Dead really free?</summary><p>Yes! We offer unlimited checks at no cost. Your data is not stored, and there are no hidden fees.</p></details>
                     <details><summary>How often can I check a site?</summary><p>You can perform as many checks as you want, but to ensure fair use, we limit one request every 2 seconds per IP.</p></details>`,
        check      : 'Check',
        invalid    : 'Invalid hostname.',
        placeholder: 'e.g. example.com',
        network    : 'Network error.'
      },
      pt: {
        langLabel  : 'Escolha outro idioma:',
        hint       : 'Digite uma URL abaixo para verificar se ela est√° online ou offline.',
        desc       : 'Live or Dead √© uma ferramenta online gratuita que verifica instantaneamente se qualquer site est√° acess√≠vel ou fora do ar. Basta inserir o dom√≠nio ou URL que deseja testar, clicar em \"Checar\" e receber o resultado imediato ‚Äî com o tempo de resposta do servidor. Sem cadastro, sem an√∫ncios atrapalhando, apenas testes r√°pidos sempre que precisar.',
        faq        : `<h2>Perguntas Frequentes</h2>
                     <details><summary>Quais URLs posso testar?</summary><p>Voc√™ pode testar dom√≠nios como <code>exemplo.com</code>, subdom√≠nios como <code>blog.exemplo.com</code> ou URLs completas com protocolo (<code>https://exemplo.com</code>).</p></details>
                     <details><summary>O Live or Dead √© realmente gratuito?</summary><p>Sim! Oferecemos verifica√ß√µes ilimitadas sem custo. Nenhum dado √© armazenado e n√£o h√° taxas escondidas.</p></details>
                     <details><summary>Com que frequ√™ncia posso checar um site?</summary><p>Voc√™ pode realizar quantas verifica√ß√µes quiser, mas para uso justo, limitamos uma solicita√ß√£o a cada 2 segundos por IP.</p></details>`,
        check      : 'Checar',
        invalid    : 'Host inv√°lido.',
        placeholder: 'ex: exemplo.com',
        network    : 'Erro de rede.'
      },
      es: {
        langLabel  : 'Elige otro idioma:',
        hint       : 'Escriba una URL abajo para verificar si est√° en l√≠nea o sin conexi√≥n.',
        desc       : 'Live or Dead es una herramienta gratuita en l√≠nea que comprueba al instante si cualquier sitio web est√° activo o ca√≠do. Solo ingresa el dominio o URL que deseas probar, pulsa \"Comprobar\" y obt√©n el resultado al instante ‚Äî con el tiempo de respuesta del servidor. Sin registro, sin publicidad interrumpiendo, solo comprobaciones r√°pidas cuando las necesites.',
        faq        : `<h2>Preguntas Frecuentes</h2>
                     <details><summary>¬øQu√© URLs puedo comprobar?</summary><p>Puedes comprobar dominios como <code>ejemplo.com</code>, subdominios como <code>blog.ejemplo.com</code> o URLs completas con protocolo (<code>https://ejemplo.com</code>).</p></details>
                     <details><summary>¬øLive or Dead es realmente gratis?</summary><p>¬°S√≠! Ofrecemos verificaciones ilimitadas sin costo. No almacenamos ning√∫n dato y no hay cargos ocultos.</p></details>
                     <details><summary>¬øCon qu√© frecuencia puedo hacer comprobaciones?</summary><p>Puedes realizar tantas comprobaciones como quieras, pero para un uso justo, limitamos una solicitud cada 2 segundos por IP.</p></details>`,
        check      : 'Comprobar',
        invalid    : 'Host inv√°lido.',
        placeholder: 'ej: ejemplo.com',
        network    : 'Error de red.'
      },
      fr: {
        langLabel  : 'Choisissez une autre langue :',
        hint       : 'Entrez une URL ci-dessous pour v√©rifier si elle est en ligne ou hors ligne.',
        desc       : 'Live or Dead est un outil en ligne gratuit qui v√©rifie instantan√©ment si un site Web est accessible ou non. Il suffit de saisir le domaine ou l‚ÄôURL que vous souhaitez tester, cliquer sur \"V√©rifier\" et obtenir le r√©sultat imm√©diatement ‚Äî avec le temps de r√©ponse du serveur. Sans inscription, sans publicit√© g√™nante, juste des v√©rifications rapides √† tout moment.',
        faq        : `<h2>FAQ</h2>
                     <details><summary>Quelles URLs puis-je tester&nbsp;?</summary><p>Vous pouvez tester des domaines comme <code>exemple.com</code>, des sous-domaines comme <code>blog.exemple.com</code> ou des URLs compl√®tes avec protocole (<code>https://exemple.com</code>).</p></details>
                     <details><summary>Live or Dead est-il vraiment gratuit&nbsp;?</summary><p>Oui&nbsp;! Nous offrons des v√©rifications illimit√©es sans frais. Aucune donn√©e n‚Äôest stock√©e et il n‚Äôy a pas de frais cach√©s.</p></details>
                     <details><summary>√Ä quelle fr√©quence puis-je effectuer des v√©rifications&nbsp;?</summary><p>Vous pouvez effectuer autant de v√©rifications que vous le souhaitez, mais pour une utilisation √©quitable, nous limitons une requ√™te toutes les 2 secondes par IP.</p></details>`,
        check      : 'V√©rifier',
        invalid    : 'Nom d‚Äôh√¥te non valide.',
        placeholder: 'ex: exemple.com',
        network    : 'Erreur r√©seau.'
      }
    };

    let currentLang = navigator.language.startsWith('pt') ? 'pt'
                     : navigator.language.startsWith('es') ? 'es'
                     : navigator.language.startsWith('fr') ? 'fr'
                     : 'en';

    const langLabel = document.getElementById('langLabel');
    const select    = document.getElementById('langSelect');
    const hintEl    = document.getElementById('hint');
    const descEl    = document.getElementById('desc');
    const faqEl     = document.getElementById('faq');
    const btn       = document.getElementById('checkBtn');
    const input     = document.getElementById('siteUrl');
    const card      = document.getElementById('result');
    const icon      = document.getElementById('icon');
    const msg       = document.getElementById('msg');

    function updateUI() {
      const cfg = data[currentLang];
      langLabel.textContent = cfg.langLabel;
      hintEl.textContent    = cfg.hint;
      descEl.textContent    = cfg.desc;
      faqEl.innerHTML       = cfg.faq;
      btn.textContent       = cfg.check;
      input.placeholder     = cfg.placeholder;
      select.value          = currentLang;
      card.style.display    = 'none';
    }

    select.addEventListener('change', e => {
      currentLang = e.target.value;
      updateUI();
    });

    function isValidHost(h) {
      return /^[a-zA-Z0-9.\-]+(:\d+)?$/.test(h);
    }

    let busy = false;
    btn.addEventListener('click', async () => {
      if (busy) return;
      busy = true;
      setTimeout(() => busy = false, 2000);

      const raw = input.value.trim();
      if (!isValidHost(raw)) {
        alert(data[currentLang].invalid);
        return;
      }
      const site = raw.startsWith('http') ? raw : 'https://' + raw;

      card.style.display = 'flex';
      card.classList.remove('up', 'down');
      icon.className = 'fa-solid fa-spinner fa-spin';
      msg.textContent = data[currentLang].check + '‚Ä¶';

      try {
        const res = await fetch(`/api/check?url=${encodeURIComponent(site)}`);
        const d   = await res.json();
        if (d.error) throw new Error();

        const host = new URL(site).hostname;
        const secs = (d.time / 1000).toFixed(1);
        const texts = {
          en: { up: `üöÄ ${host} is LIVE! (${secs}s)`, down: `‚ùå ${host} is DOWN!` },
          pt: { up: `üöÄ ${host} est√° NO AR! (${secs}s)`, down: `‚ùå ${host} est√° OFFLINE!` },
          es: { up: `üöÄ ${host} est√° EN L√çNEA! (${secs}s)`, down: `‚ùå ${host} est√° CA√çDO!` },
          fr: { up: `üöÄ ${host} est EN LIGNE ! (${secs}s)`, down: `‚ùå ${host} est HORS LIGNE !` }
        };

        if (d.status < 400) {
          card.classList.add('up');
          icon.className = 'fa-solid fa-circle-check';
          msg.textContent = texts[currentLang].up;
        } else {
          card.classList.add('down');
          icon.className = 'fa-solid fa-circle-xmark';
          msg.textContent = texts[currentLang].down;
        }
      } catch {
        card.classList.add('down');
        icon.className = 'fa-solid fa-triangle-exclamation';
        msg.textContent = data[currentLang].network;
      }
    });

    updateUI();
  </script>

</body>
</html>
